datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model user {
  pubkey String @id @db.VarChar(44)
}

model prediction_event {
  id                String   @id @db.VarChar(44)
  pubkey            String   @unique @db.VarChar(44)
  creator           String   @db.VarChar(44)
  title             String   @db.VarChar(50)
  description       String   @db.VarChar(144)
  left_description  String   @db.VarChar(144)
  right_description String   @db.VarChar(144)
  left_mint         String?  @db.VarChar(44)
  right_mint        String?  @db.VarChar(44)
  start_date        DateTime @db.Timestamptz(3)
  end_date          DateTime @db.Timestamptz(3)
  burning           Boolean
  result            side?
  deleted           Boolean  @default(false)
  created_date      DateTime @default(now()) @db.Timestamptz(3)
}

model ticket {
  pubkey       String   @id @db.VarChar(44)
  event_pubkey String   @db.VarChar(44)
  creator      String   @db.VarChar(44)
  selection    side
  amount       Decimal  @db.Decimal(80, 0)
  claimed      Boolean
  withdrawn    Boolean
  created_date DateTime @default(now()) @db.Timestamptz(3)
}

model signature_snapshot {
  signature    String   @id @db.VarChar(88)
  event        event
  context      context
  created_date DateTime @default(now()) @db.Timestamptz(3)
}

model setting {
  key   String @id @db.VarChar
  value String @db.VarChar
}

enum side {
  left
  right
}

enum event {
  deploy_event
  vote_event
  finish_event
  close_event
  claim_rewards
  withdraw
}

enum context {
  stream
  scanner
}
