generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model PredictionEvent {
  id        Int      @id @default(autoincrement())
  userId Int 
  title     String
  endTime   DateTime
  balance   String
  createdAt DateTime @default(now())
  answers PredictionAnswer[]
  author User @relation(fields: [userId], references: [id])
}

model PredictionAnswer{
  id Int @id @default(autoincrement())
  value String
  isCorrect Boolean @default(false)
  acceptableVoteTick String
  predictionEventId Int
  predictionEvent PredictionEvent @relation(fields: [predictionEventId], references: [id], onDelete: Cascade)
  predictionVotes PredictionVote[]
}

model PredictionVote {
  id Int @id @default(autoincrement())
  predictionAnswerId Int
  userId Int 
  amountBalance String
  predictionAnswer PredictionAnswer @relation(fields: [predictionAnswerId], references: [id], onDelete: Cascade)
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model User {
  id Int @id @default(autoincrement())
  username String
  address String @unique()
  predictionVotes PredictionVote[]
  PredictionEvent PredictionEvent[]
}

model Otp {
  id Int @id @default(autoincrement())
  address String
  value String
  type OTP 
  expirerIn DateTime
}

enum OTP {
  PAYLOAD 
}
